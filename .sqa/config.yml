config:
  credentials:
      - id: orviz-github-basic
        username_var: GIT_USER
        password_var: GIT_PASSWORD

sqa_criteria:
  qc_doc:
    repos:
      jenkins-pipeline-library:
        container: sphinx
        commands:
          - pip3 install -r /jepl/jenkins-pipeline-library/docs/requirements.txt
          - git -C /jepl/jenkins-pipeline-library config --global user.name "Pablo Orviz"
          - git -C /jepl/jenkins-pipeline-library config --global user.email "orviz@ifca.unican.es"
          - >
            bash -c "cd /jepl/jenkins-pipeline-library
            && sphinx-multiversion docs docs/_build/html
            && cp docs/assets/index.html docs/_build/html/index.html
            && env GIT_ASKPASS=/jepl/jenkins-pipeline-library/.git_credential_helper.sh
            ghp-import -n -p docs/_build/html"
